From 1b933f9a392830d2116eb340103bfc95d70dd798 Mon Sep 17 00:00:00 2001
From: "Ruan, Hongfu" <hongfu.ruan@intel.com>
Date: Fri, 19 Nov 2021 14:10:25 +0800
Subject: [PATCH] allow install packages by default

Signed-off-by: Ruan, Hongfu <hongfu.ruan@intel.com>
---
 core/java/android/app/AppOpsManager.java | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/core/java/android/app/AppOpsManager.java b/core/java/android/app/AppOpsManager.java
index 6baabb69e028..d0cc909850eb 100644
--- a/core/java/android/app/AppOpsManager.java
+++ b/core/java/android/app/AppOpsManager.java
@@ -97,7 +97,7 @@ import java.util.Objects;
 import java.util.concurrent.Executor;
 import java.util.function.Consumer;
 import java.util.function.Supplier;
-
+import android.util.Log;
 /**
  * App-ops are used for two purposes: Access control and tracking.
  *
@@ -2305,7 +2305,7 @@ public class AppOpsManager {
             AppOpsManager.MODE_ALLOWED, // RUN_IN_BACKGROUND
             AppOpsManager.MODE_ALLOWED, // AUDIO_ACCESSIBILITY_VOLUME
             AppOpsManager.MODE_ALLOWED, // READ_PHONE_NUMBERS
-            AppOpsManager.MODE_DEFAULT, // REQUEST_INSTALL_PACKAGES
+            AppOpsManager.MODE_ALLOWED, // REQUEST_INSTALL_PACKAGES
             AppOpsManager.MODE_ALLOWED, // PICTURE_IN_PICTURE
             AppOpsManager.MODE_DEFAULT, // INSTANT_APP_START_FOREGROUND
             AppOpsManager.MODE_ALLOWED, // ANSWER_PHONE_CALLS
@@ -4308,6 +4308,7 @@ public class AppOpsManager {
          */
         @DataClass.Generated.Member
         public @Mode int getMode() {
+            Log.e("hongfu", "get Mode here: "+mMode);
             return mMode;
         }
 
-- 
2.29.2

