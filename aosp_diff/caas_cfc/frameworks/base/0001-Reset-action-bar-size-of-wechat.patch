From 363bf42f2dff3d2a0fb2135ddf38661b97123b9c Mon Sep 17 00:00:00 2001
From: "ji, zhenlong z" <zhenlong.z.ji@intel.com>
Date: Tue, 8 Mar 2022 10:11:37 +0800
Subject: [PATCH] Reset action bar size of wechat

Signed-off-by: ji, zhenlong z <zhenlong.z.ji@intel.com>
---
 core/java/android/widget/FrameLayout.java | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

diff --git a/core/java/android/widget/FrameLayout.java b/core/java/android/widget/FrameLayout.java
index 92e9a96e4897..150025d5b318 100644
--- a/core/java/android/widget/FrameLayout.java
+++ b/core/java/android/widget/FrameLayout.java
@@ -33,6 +33,7 @@ import android.view.ViewGroup;
 import android.view.ViewHierarchyEncoder;
 import android.view.inspector.InspectableProperty;
 import android.widget.RemoteViews.RemoteView;
+import android.util.Log;
 
 import com.android.internal.R;
 
@@ -222,9 +223,14 @@ public class FrameLayout extends ViewGroup {
             maxWidth = Math.max(maxWidth, drawable.getMinimumWidth());
         }
 
-        setMeasuredDimension(resolveSizeAndState(maxWidth, widthMeasureSpec, childState),
-                resolveSizeAndState(maxHeight, heightMeasureSpec,
-                        childState << MEASURED_HEIGHT_STATE_SHIFT));
+        int tempWidth = resolveSizeAndState(maxWidth, widthMeasureSpec, childState);
+        int tempHeight = resolveSizeAndState(maxHeight, heightMeasureSpec,
+                                   childState << MEASURED_HEIGHT_STATE_SHIFT);
+        if (MeasureSpec.getSize(tempWidth) == 1200 && MeasureSpec.getSize(tempHeight) == 113) {
+             Log.d("test", "### wechat app!");
+             tempHeight = MeasureSpec.makeMeasureSpec(170, MeasureSpec.getMode(tempHeight));
+        }
+        setMeasuredDimension(tempWidth, tempHeight);
 
         count = mMatchParentChildren.size();
         if (count > 1) {
-- 
2.25.1

