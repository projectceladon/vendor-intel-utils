From db1596659afb5fb23c2fa970832e17712df755ab Mon Sep 17 00:00:00 2001
From: HeYue <yue.he@intel.com>
Date: Thu, 30 May 2024 11:25:49 +0800
Subject: [PATCH] Set the special bit to indicate the framebuffer

Use the GRALLOC_USAGE_PRIVATE_0 to indicate.

Signed-off-by: HeYue <yue.he@intel.com>
---
 services/surfaceflinger/DisplayHardware/FramebufferSurface.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/services/surfaceflinger/DisplayHardware/FramebufferSurface.cpp b/services/surfaceflinger/DisplayHardware/FramebufferSurface.cpp
index ce602a8ad90a..e960d0e6f669 100644
--- a/services/surfaceflinger/DisplayHardware/FramebufferSurface.cpp
+++ b/services/surfaceflinger/DisplayHardware/FramebufferSurface.cpp
@@ -67,7 +67,8 @@ FramebufferSurface::FramebufferSurface(HWComposer& hwc, PhysicalDisplayId displa
     mConsumer->setConsumerName(mName);
     mConsumer->setConsumerUsageBits(GRALLOC_USAGE_HW_FB |
                                        GRALLOC_USAGE_HW_RENDER |
-                                       GRALLOC_USAGE_HW_COMPOSER);
+                                       GRALLOC_USAGE_HW_COMPOSER |
+                                       GRALLOC_USAGE_PRIVATE_0);
     const auto limitedSize = limitSize(size);
     mConsumer->setDefaultBufferSize(limitedSize.width, limitedSize.height);
     mConsumer->setMaxAcquiredBufferCount(
-- 
2.43.2

