From c675cd6c20b63a4b95c5356bbbb24dfd9bb741d4 Mon Sep 17 00:00:00 2001
From: zhonghuis <zhonghui.shi@intel.com>
Date: Tue, 2 Apr 2024 17:22:39 +0000
Subject: [PATCH] Update white balance default value

Test:

Tracked-On:
Signed-off-by: zhonghuis <zhonghui.shi@intel.com>
---
 .../display/WhitebalanceLevelPreferenceController.java      | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/com/android/car/settings/display/WhitebalanceLevelPreferenceController.java b/src/com/android/car/settings/display/WhitebalanceLevelPreferenceController.java
index 233c3f830..c1887aaa9 100644
--- a/src/com/android/car/settings/display/WhitebalanceLevelPreferenceController.java
+++ b/src/com/android/car/settings/display/WhitebalanceLevelPreferenceController.java
@@ -53,8 +53,8 @@ public class WhitebalanceLevelPreferenceController extends PreferenceController<
     private ColorDisplayManager mColorDisplayManager;
     private final int mMaximumWhitebalance = 65535;
     private final int mMinimumWhitebalance = 0;
-    private final int mDefaultWhitebalanceLevel = 255;
-    private final int mMaxWhitebalanceLevel = 255;
+    private final int mDefaultWhitebalanceLevel = 100;
+    private final int mMaxWhitebalanceLevel = 200;
     public static WhitebalanceLevelPreferenceController mWhitebalanceInstance;
     private final Handler mHandler = new Handler(Looper.getMainLooper());
 
@@ -129,7 +129,7 @@ public class WhitebalanceLevelPreferenceController extends PreferenceController<
         int linear = convertGammaToLinear(gamma, mMinimumWhitebalance, mMaximumWhitebalance);
         Settings.System.putIntForUser(getContext().getContentResolver(),
                 Settings.System.SCREEN_WHITEBALANCE, linear, UserHandle.myUserId());
-        int whitebalanceLevel = gamma * 100/65535;
+        int whitebalanceLevel = gamma * mMaxWhitebalanceLevel/65535;
         mColorDisplayManager.setDisplayWhiteBalanceEnabled(true);
         mColorDisplayManager.setWhitebalanceLevel(whitebalanceLevel);
         return true;
-- 
2.34.1

