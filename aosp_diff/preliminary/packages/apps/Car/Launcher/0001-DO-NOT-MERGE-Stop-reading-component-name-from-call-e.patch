From f7b7923052dd93458e66a75da7576c57482df823 Mon Sep 17 00:00:00 2001
From: Yiqun Wu <yiqunw@google.com>
Date: Mon, 24 Jun 2024 19:50:11 +0000
Subject: [PATCH] DO NOT MERGE: Stop reading component name from call extras

Bug: 335585728
Test: mma
Change-Id: I3f500a35a4615843601a1d6284d5de6d32b3d300
Merged-In: I3f500a35a4615843601a1d6284d5de6d32b3d300
---
 .../homescreen/audio/InCallModel.java         | 29 +++++++------------
 1 file changed, 10 insertions(+), 19 deletions(-)

diff --git a/src/com/android/car/carlauncher/homescreen/audio/InCallModel.java b/src/com/android/car/carlauncher/homescreen/audio/InCallModel.java
index a36c0409..bbd5da37 100644
--- a/src/com/android/car/carlauncher/homescreen/audio/InCallModel.java
+++ b/src/com/android/car/carlauncher/homescreen/audio/InCallModel.java
@@ -26,7 +26,6 @@ import android.content.Intent;
 import android.content.pm.ApplicationInfo;
 import android.content.pm.PackageManager;
 import android.graphics.drawable.Drawable;
-import android.os.Bundle;
 import android.telecom.Call;
 import android.telecom.CallAudioState;
 import android.telecom.PhoneAccountHandle;
@@ -169,24 +168,16 @@ public class InCallModel implements AudioModel, InCallServiceImpl.InCallListener
     public Intent getIntent() {
         Intent intent = null;
         if (isSelfManagedCall()) {
-            Bundle extras = mCurrentCall.getDetails().getExtras();
-            ComponentName componentName = extras == null ? null : extras.getParcelable(
-                    Intent.EXTRA_COMPONENT_NAME, ComponentName.class);
-            if (componentName != null) {
-                intent = new Intent();
-                intent.setComponent(componentName);
-            } else {
-                String callingAppPackageName = getCallingAppPackageName();
-                if (!TextUtils.isEmpty(callingAppPackageName)) {
-                    if (isCarAppCallingService(callingAppPackageName)) {
-                        intent = new Intent();
-                        intent.setComponent(
-                                new ComponentName(
-                                        callingAppPackageName, CAR_APP_ACTIVITY_INTERFACE));
-                        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
-                    } else {
-                        intent = mPackageManager.getLaunchIntentForPackage(callingAppPackageName);
-                    }
+	    String callingAppPackageName = getCallingAppPackageName();
+            if (!TextUtils.isEmpty(callingAppPackageName)) {
+                if (isCarAppCallingService(callingAppPackageName)) {
+                    intent = new Intent();
+                    intent.setComponent(
+                            new ComponentName(
+                                    callingAppPackageName, CAR_APP_ACTIVITY_INTERFACE));
+                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
+                } else {
+                    intent = mPackageManager.getLaunchIntentForPackage(callingAppPackageName);
                 }
             }
         } else {
-- 
2.34.1

