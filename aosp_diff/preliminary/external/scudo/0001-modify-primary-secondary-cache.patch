From 8bf1be594e9c6aec43d09703e13b6e7efdc172c0 Mon Sep 17 00:00:00 2001
From: "Liu, Kai1" <kai1.liu@intel.com>
Date: Mon, 10 Jul 2023 14:34:00 +0800
Subject: [PATCH] j# This is a combination of 2 commits.

modify secondary cache
---
 standalone/allocator_config.h | 8 ++++----
 standalone/size_class_map.h   | 4 ++--
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/standalone/allocator_config.h b/standalone/allocator_config.h
index 8e103f2..d8b39dc 100644
--- a/standalone/allocator_config.h
+++ b/standalone/allocator_config.h
@@ -98,10 +98,10 @@ struct AndroidConfig {
   static const s32 PrimaryMaxReleaseToOsIntervalMs = 1000;
 
   typedef MapAllocatorCache<AndroidConfig> SecondaryCache;
-  static const u32 SecondaryCacheEntriesArraySize = 256U;
-  static const u32 SecondaryCacheQuarantineSize = 32U;
-  static const u32 SecondaryCacheDefaultMaxEntriesCount = 32U;
-  static const uptr SecondaryCacheDefaultMaxEntrySize = 2UL << 20;
+  static const u32 SecondaryCacheEntriesArraySize = 1024U;
+  static const u32 SecondaryCacheQuarantineSize = 0U;
+  static const u32 SecondaryCacheDefaultMaxEntriesCount = 128U;
+  static const uptr SecondaryCacheDefaultMaxEntrySize = 8UL << 20;
   static const s32 SecondaryCacheMinReleaseToOsIntervalMs = 0;
   static const s32 SecondaryCacheMaxReleaseToOsIntervalMs = 1000;
 
diff --git a/standalone/size_class_map.h b/standalone/size_class_map.h
index 1948802..8ed4fc4 100644
--- a/standalone/size_class_map.h
+++ b/standalone/size_class_map.h
@@ -239,8 +239,8 @@ struct AndroidSizeClassConfig {
   static const uptr MinSizeLog = 4;
   static const uptr MidSizeLog = 6;
   static const uptr MaxSizeLog = 16;
-  static const u32 MaxNumCachedHint = 13;
-  static const uptr MaxBytesCachedLog = 13;
+  static const u32 MaxNumCachedHint = 52;
+  static const uptr MaxBytesCachedLog = 15;
 
   static constexpr u32 Classes[] = {
       0x00020, 0x00030, 0x00040, 0x00050, 0x00060, 0x00070, 0x00090, 0x000b0,
-- 
2.33.1

