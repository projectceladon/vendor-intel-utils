From f1478b291c498145f3cd6da968e8a47f8f5cc6c1 Mon Sep 17 00:00:00 2001
From: Kaushlendra Kumar <kaushlendra.kumar@intel.com>
Date: Mon, 24 Jul 2023 17:18:12 +0530
Subject: [PATCH] zlib: Optimization for CPU/GPU Benchmark

Signed-off-by: Kaushlendra Kumar <kaushlendra.kumar@intel.com>
---
 ...mization-for-Antutu-memory-Benchmark.patch | 39 +++++++++++++++++++
 1 file changed, 39 insertions(+)
 create mode 100644 aosp_diff/preliminary/external/zlib/0002-zlib-optimization-for-Antutu-memory-Benchmark.patch

diff --git a/aosp_diff/preliminary/external/zlib/0002-zlib-optimization-for-Antutu-memory-Benchmark.patch b/aosp_diff/preliminary/external/zlib/0002-zlib-optimization-for-Antutu-memory-Benchmark.patch
new file mode 100644
index 0000000..24f66aa
--- /dev/null
+++ b/aosp_diff/preliminary/external/zlib/0002-zlib-optimization-for-Antutu-memory-Benchmark.patch
@@ -0,0 +1,39 @@
+From cf4959d054e3f85112c8a8f15b1f6b5a78320b60 Mon Sep 17 00:00:00 2001
+From: Kaushlendra Kumar <kaushlendra.kumar@intel.com>
+Date: Mon, 24 Jul 2023 17:14:27 +0530
+Subject: [PATCH] zlib: optimization for Antutu memory Benchmark
+
+Signed-off-by: Kaushlendra Kumar <kaushlendra.kumar@intel.com>
+---
+ Android.bp | 1 +
+ deflate.c  | 2 +-
+ 2 files changed, 2 insertions(+), 1 deletion(-)
+
+diff --git a/Android.bp b/Android.bp
+index ae055c0..3ae7ffe 100644
+--- a/Android.bp
++++ b/Android.bp
+@@ -72,6 +72,7 @@ cflags_android_x86 = [
+     // reports that the processor really does have the instruction.
+     "-mpclmul",
+     "-DCRC32_SIMD_SSE42_PCLMUL",
++    "-DFASTEST",
+ ]
+ srcs_x86 = [
+     "crc_folding.c",
+diff --git a/deflate.c b/deflate.c
+index fc7ae45..2c40f0e 100644
+--- a/deflate.c
++++ b/deflate.c
+@@ -62,7 +62,7 @@
+ 
+ #ifdef FASTEST
+ /* See http://crbug.com/1113596 */
+-#error "FASTEST is not supported in Chromium's zlib."
++//#error "FASTEST is not supported in Chromium's zlib."
+ #endif
+ 
+ const char deflate_copyright[] =
+-- 
+2.40.1
+
-- 
2.40.1

