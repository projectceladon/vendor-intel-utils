From ea2551561b57d49ded53495190e8c8166da54196 Mon Sep 17 00:00:00 2001
From: chen yangyang <yangyangx.chen@intel.com>
Date: Sun, 29 Sep 2019 04:56:28 -0400
Subject: [PATCH] setup DIST env while call publish target.

Tracked-On: OAM-86839
Signed-off-by: chen yangyang <yangyangx.chen@intel.com>
---
 ui/build/.build.go.swp | Bin 0 -> 16384 bytes
 ui/build/kati.go       |   5 +++++
 2 files changed, 5 insertions(+)
 create mode 100644 ui/build/.build.go.swp

diff --git a/ui/build/.build.go.swp b/ui/build/.build.go.swp
new file mode 100644
index 0000000000000000000000000000000000000000..e900779f1807f9a7be74ad94da8a1dcbdd3ed50d
GIT binary patch
literal 16384
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
Ab^rhX

literal 0
HcmV?d00001

diff --git a/ui/build/kati.go b/ui/build/kati.go
index 0e97103..33b96d4 100644
--- a/ui/build/kati.go
+++ b/ui/build/kati.go
@@ -194,6 +194,11 @@ func runKatiPackage(ctx Context, config Config) {
 			env.Set("DIST", "true")
 			env.Set("DIST_DIR", config.DistDir())
 		}
+                if inList("publish", config.Arguments()) {
+			env.Set("DIST", "true")
+			env.Set("DIST_DIR", config.DistDir())
+                }
+
 	})
 }
 
-- 
2.7.4

