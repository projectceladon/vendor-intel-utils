From 08fe663683e1ac1d34b69c48b29c6067b0d24f02 Mon Sep 17 00:00:00 2001
From: Aiswarya Cyriac <aiswarya.cyriac@intel.com>
Date: Tue, 16 Mar 2021 12:21:32 +0530
Subject: [PATCH] Test patch for CTS failure
 libcore.java.net.InetAddressTest#test_getByName

Signed-off-by: Aiswarya Cyriac <aiswarya.cyriac@intel.com>
---
 libc/dns/net/getaddrinfo.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/libc/dns/net/getaddrinfo.c b/libc/dns/net/getaddrinfo.c
index d0c11d2b0..d3f502fdd 100644
--- a/libc/dns/net/getaddrinfo.c
+++ b/libc/dns/net/getaddrinfo.c
@@ -2317,6 +2317,7 @@ res_searchN(const char *name, struct res_target *target, res_state res)
 	 */
 	saved_herrno = -1;
 	if (dots >= res->ndots) {
+		if(trailing_dot == 1) return -1;
 		ret = res_querydomainN(name, NULL, target, res);
 		if (ret > 0)
 			return (ret);
-- 
2.17.1

