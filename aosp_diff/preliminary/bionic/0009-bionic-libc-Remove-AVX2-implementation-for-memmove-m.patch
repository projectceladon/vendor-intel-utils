From efd85111626743d0d2f37a3a574c9200cda55a5b Mon Sep 17 00:00:00 2001
From: kaushlen <kaushlendra.kumar@intel.com>
Date: Fri, 2 Sep 2022 03:44:44 +0000
Subject: [PATCH] bionic:libc: Remove AVX2 implementation for memmove, memcpy

Signed-off-by: kaushlen <kaushlendra.kumar@intel.com>
---
 libc/arch-x86_64/dynamic_function_dispatch.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/libc/arch-x86_64/dynamic_function_dispatch.cpp b/libc/arch-x86_64/dynamic_function_dispatch.cpp
index eca295c5c..330e1e620 100644
--- a/libc/arch-x86_64/dynamic_function_dispatch.cpp
+++ b/libc/arch-x86_64/dynamic_function_dispatch.cpp
@@ -35,21 +35,21 @@ extern "C" {
 typedef int memcmp_func(const void* __lhs, const void* __rhs, size_t __n);
 DEFINE_IFUNC_FOR(memcmp) {
     __builtin_cpu_init();
-    if (__builtin_cpu_supports("avx2")) RETURN_FUNC(memcmp_func, memcmp_avx2);
+    if (0) RETURN_FUNC(memcmp_func, memcmp_avx2);
     RETURN_FUNC(memcmp_func, memcmp_generic);
 }
 
 typedef void* memmove_func(void* __dst, const void* __src, size_t __n);
 DEFINE_IFUNC_FOR(memmove) {
     __builtin_cpu_init();
-    if (__builtin_cpu_supports("avx2")) RETURN_FUNC(memmove_func, memmove_avx2);
+    if (0) RETURN_FUNC(memmove_func, memmove_avx2);
     RETURN_FUNC(memmove_func, memmove_generic);
 }
 
 typedef void* memcpy_func(void* __dst, const void* __src, size_t __n);
 DEFINE_IFUNC_FOR(memcpy) {
     __builtin_cpu_init();
-    if (__builtin_cpu_supports("avx2")) RETURN_FUNC(memcpy_func, memcpy_avx2);
+    if (0) RETURN_FUNC(memcpy_func, memcpy_avx2);
     RETURN_FUNC(memcpy_func, memcpy_generic);
 }
 
-- 
2.37.1

