From 7a0d5be022b0b2af11d4d8ae5797b05c1031df89 Mon Sep 17 00:00:00 2001
From: kaushlen <kaushlendra.kumar@intel.com>
Date: Fri, 2 Sep 2022 03:44:44 +0000
Subject: [PATCH] bionic:libc: Remove AVX2 implementation for memmove, memcpy

Signed-off-by: kaushlen <kaushlendra.kumar@intel.com>
---
 libc/arch-x86_64/dynamic_function_dispatch.cpp | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/libc/arch-x86_64/dynamic_function_dispatch.cpp b/libc/arch-x86_64/dynamic_function_dispatch.cpp
index eca295c5c..4f7ed2909 100644
--- a/libc/arch-x86_64/dynamic_function_dispatch.cpp
+++ b/libc/arch-x86_64/dynamic_function_dispatch.cpp
@@ -35,14 +35,14 @@ extern "C" {
 typedef int memcmp_func(const void* __lhs, const void* __rhs, size_t __n);
 DEFINE_IFUNC_FOR(memcmp) {
     __builtin_cpu_init();
-    if (__builtin_cpu_supports("avx2")) RETURN_FUNC(memcmp_func, memcmp_avx2);
+    if (0) RETURN_FUNC(memcmp_func, memcmp_avx2);
     RETURN_FUNC(memcmp_func, memcmp_generic);
 }
 
 typedef void* memmove_func(void* __dst, const void* __src, size_t __n);
 DEFINE_IFUNC_FOR(memmove) {
     __builtin_cpu_init();
-    if (__builtin_cpu_supports("avx2")) RETURN_FUNC(memmove_func, memmove_avx2);
+    if (0) RETURN_FUNC(memmove_func, memmove_avx2);
     RETURN_FUNC(memmove_func, memmove_generic);
 }
 
-- 
2.37.1

