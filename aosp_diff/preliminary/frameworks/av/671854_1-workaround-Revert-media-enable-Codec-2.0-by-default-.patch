From 3a91cf3e60ac47cf8dccc721996e725fdd8b56fa Mon Sep 17 00:00:00 2001
From: "Chen, Yu" <yu.y.chen@intel.com>
Date: Thu, 13 Jun 2019 14:58:44 +0800
Subject: [PATCH] [workaround]Revert "media: enable Codec 2.0 by default again"

This reverts commit 8635fc832085b0548b40232b13646bbca15842ff.

Change-Id: I18cf645100cb334ececbe74809672828dd80ffed
---
 media/codec2/sfplugin/Codec2InfoBuilder.cpp      | 2 +-
 media/libstagefright/StagefrightPluginLoader.cpp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/media/codec2/sfplugin/Codec2InfoBuilder.cpp b/media/codec2/sfplugin/Codec2InfoBuilder.cpp
index c54c6019c..1919597a0 100644
--- a/media/codec2/sfplugin/Codec2InfoBuilder.cpp
+++ b/media/codec2/sfplugin/Codec2InfoBuilder.cpp
@@ -313,7 +313,7 @@ status_t Codec2InfoBuilder::buildMediaCodecList(MediaCodecListWriter* writer) {
     //
     // Note: Currently, OMX components have default rank 0x100, while all
     // Codec2.0 software components have default rank 0x200.
-    int option = ::android::base::GetIntProperty("debug.stagefright.ccodec", 4);
+    int option = ::android::base::GetIntProperty("debug.stagefright.ccodec", 1);

     // Obtain Codec2Client
     std::vector<Traits> traits = Codec2Client::ListComponents();
diff --git a/media/libstagefright/StagefrightPluginLoader.cpp b/media/libstagefright/StagefrightPluginLoader.cpp
index fb03c5ebc..b90649cc7 100644
--- a/media/libstagefright/StagefrightPluginLoader.cpp
+++ b/media/libstagefright/StagefrightPluginLoader.cpp
@@ -35,7 +35,7 @@ constexpr const char kCCodecPluginPath[] = "libsfplugin_ccodec.so";
 }  // unnamed namespace

 StagefrightPluginLoader::StagefrightPluginLoader(const char *libPath) {
-    if (android::base::GetIntProperty("debug.stagefright.ccodec", 1) == 0) {
+    if (android::base::GetIntProperty("debug.media.codec2", 0) == 0) {
         ALOGD("CCodec is disabled.");
         return;
     }
--
2.21.0
