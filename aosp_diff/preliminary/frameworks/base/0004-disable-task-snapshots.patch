From 0ee6cf430ca230233c2e425c01b42134cbc6e99f Mon Sep 17 00:00:00 2001
From: renchenglei <chenglei.ren@intel.com>
Date: Fri, 29 Jan 2021 05:13:34 +0800
Subject: [PATCH] disable task-snapshots

Tracked-On:
---
 .../java/com/android/server/wm/TaskSnapshotController.java   | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/services/core/java/com/android/server/wm/TaskSnapshotController.java b/services/core/java/com/android/server/wm/TaskSnapshotController.java
index e85049cad2f4..635b448f7ceb 100644
--- a/services/core/java/com/android/server/wm/TaskSnapshotController.java
+++ b/services/core/java/com/android/server/wm/TaskSnapshotController.java
@@ -207,12 +207,17 @@ class TaskSnapshotController {
                     Slog.e(TAG, "Invalid task snapshot dimensions " + buffer.getWidth() + "x"
                             + buffer.getHeight());
                 } else {
+		    buffer.destroy();
+		    Slog.e(TAG, "media cts - disbale - task snapshot dimensions " + buffer.getWidth() + "x"
+                            + buffer.getHeight());
+		    /*
                     mCache.putSnapshot(task, snapshot);
                     // Don't persist or notify the change for the temporal snapshot.
                     if (!snapshotHome) {
                         mPersister.persistSnapshot(task.mTaskId, task.mUserId, snapshot);
                         task.onSnapshotChanged(snapshot);
                     }
+		    */
                 }
             }
         }
-- 
2.17.1

