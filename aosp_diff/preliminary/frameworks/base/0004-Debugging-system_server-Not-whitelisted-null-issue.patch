From fb9221f0210c88ea2e5ba798051428b1494bf0ee Mon Sep 17 00:00:00 2001
From: yaravapa <yasoda.aravapalli@intel.com>
Date: Fri, 5 Feb 2021 15:01:11 +0530
Subject: [PATCH] Debugging (system_server) Not whitelisted null issue

Tracked-On: OAM-95316
Signed-off-by: yaravapa <yasoda.aravapalli@intel.com>
---
 core/jni/fd_utils.cpp | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/core/jni/fd_utils.cpp b/core/jni/fd_utils.cpp
index c72668f84fb..c546f7d3364 100644
--- a/core/jni/fd_utils.cpp
+++ b/core/jni/fd_utils.cpp
@@ -31,6 +31,9 @@
 #include <android-base/stringprintf.h>
 #include <android-base/strings.h>
 
+#define LOG_TAG "YASODA"
+#include <utils/Log.h>
+
 // Static whitelist of open paths that the zygote is allowed to keep open.
 static const char* kPathWhitelist[] = {
         "/apex/com.android.conscrypt/javalib/conscrypt.jar",
@@ -266,7 +269,7 @@ FileDescriptorInfo* FileDescriptorInfo::CreateFromFd(int fd, fail_fn_t fail_fn)
                                         fd_path.c_str(),
                                         strerror(errno)));
   }
-
+  ALOGV("Whitelisted fd = %d, path = %s", fd, file_path.c_str()); 
   if (!whitelist->IsAllowed(file_path)) {
     fail_fn(android::base::StringPrintf("Not whitelisted (%d): %s", fd, file_path.c_str()));
   }
-- 
2.17.1

