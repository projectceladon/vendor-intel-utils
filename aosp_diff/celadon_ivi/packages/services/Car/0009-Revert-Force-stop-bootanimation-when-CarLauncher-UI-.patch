From e57f6694140d8d2bca059e2d4c2d65c029f342c7 Mon Sep 17 00:00:00 2001
From: Tanuj Tekriwal <tanuj.tekriwal@intel.com>
Date: Thu, 22 Jun 2023 11:57:20 +0530
Subject: [PATCH] Revert "Force stop bootanimation when CarLauncher UI ready"

This reverts commit 9b43700c49267f31205e8a9afcbf322415578ab2.
---
 .../car/SystemActivityMonitoringService.java    | 17 -----------------
 1 file changed, 17 deletions(-)

diff --git a/service/src/com/android/car/SystemActivityMonitoringService.java b/service/src/com/android/car/SystemActivityMonitoringService.java
index 8bea946b2..897fde381 100644
--- a/service/src/com/android/car/SystemActivityMonitoringService.java
+++ b/service/src/com/android/car/SystemActivityMonitoringService.java
@@ -31,7 +31,6 @@ import android.os.HandlerThread;
 import android.os.Looper;
 import android.os.Message;
 import android.os.RemoteException;
-import android.os.SystemProperties;
 import android.os.UserHandle;
 import android.util.ArrayMap;
 import android.util.ArraySet;
@@ -124,8 +123,6 @@ public class SystemActivityMonitoringService implements CarServiceBase {
     @GuardedBy("mLock")
     private ActivityLaunchListener mActivityLaunchListener;
 
-    private boolean mCheckLauncherStartedDone = false;
-
     public SystemActivityMonitoringService(Context context) {
         mContext = context;
         mProcessObserver = new ProcessObserver();
@@ -325,20 +322,6 @@ public class SystemActivityMonitoringService implements CarServiceBase {
                         Slog.i(CarLog.TAG_AM, "Updating top task to: " + newTopTaskInfo);
                     }
                 }
-                // workaround to force stop bootanimation when CarLauncher UI ready
-                // to improve the cold boot time
-                if (!mCheckLauncherStartedDone) {
-                    if (newTopTaskInfo.topActivity.getPackageName().equals("com.android.car.mapsplaceholder")) {
-                        mHandler.postDelayed(new Runnable() {
-                            @Override
-                            public void run() {
-                                Slog.i(CarLog.TAG_AM, "force stop bootanimation");
-                                SystemProperties.set("ctl.stop", "bootanim");
-                            }
-                        }, 10);
-                        mCheckLauncherStartedDone = true;
-                    }
-                }
             }
             // Assuming displays remains the same.
             for (int i = 0; i < topTasks.size(); i++) {
-- 
2.17.1

