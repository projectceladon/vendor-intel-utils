From 713012136f9dbace10b608f8d679f5132838bd5a Mon Sep 17 00:00:00 2001
From: "Chen, Yu" <yu.y.chen@intel.com>
Date: Sun, 6 Feb 2022 15:30:34 +0800
Subject: [PATCH 1/2] remove bp

Change-Id: I44756337bfa5778230ebb42846dc0651fba31ade
Signed-off-by: Chen, Yu <yu.y.chen@intel.com>
---
 Android.bp                        | 69 -------------------------------
 Android.sources.bp                | 12 ------
 amdgpu/Android.bp                 | 16 -------
 amdgpu/Android.sources.bp         | 15 -------
 data/Android.bp                   |  6 ---
 etnaviv/Android.bp                | 11 -----
 etnaviv/Android.sources.bp        | 13 ------
 freedreno/Android.bp              | 11 -----
 freedreno/Android.sources.bp      | 16 -------
 intel/Android.bp                  | 36 ----------------
 intel/Android.sources.bp          | 13 ------
 libkms/Android.bp                 | 15 -------
 libkms/Android.sources.bp         | 38 -----------------
 nouveau/Android.bp                | 11 -----
 nouveau/Android.sources.bp        | 11 -----
 omap/Android.bp                   | 12 ------
 omap/Android.sources.bp           |  8 ----
 radeon/Android.bp                 | 11 -----
 radeon/Android.sources.bp         | 13 ------
 tegra/Android.bp                  | 14 -------
 tests/Android.bp                  |  6 ---
 tests/modetest/Android.bp         | 12 ------
 tests/modetest/Android.sources.bp | 10 -----
 tests/proptest/Android.bp         |  8 ----
 tests/util/Android.bp             | 35 ----------------
 tests/util/Android.sources.bp     | 10 -----
 26 files changed, 432 deletions(-)
 delete mode 100644 Android.bp
 delete mode 100644 Android.sources.bp
 delete mode 100644 amdgpu/Android.bp
 delete mode 100644 amdgpu/Android.sources.bp
 delete mode 100644 data/Android.bp
 delete mode 100644 etnaviv/Android.bp
 delete mode 100644 etnaviv/Android.sources.bp
 delete mode 100644 freedreno/Android.bp
 delete mode 100644 freedreno/Android.sources.bp
 delete mode 100644 intel/Android.bp
 delete mode 100644 intel/Android.sources.bp
 delete mode 100644 libkms/Android.bp
 delete mode 100644 libkms/Android.sources.bp
 delete mode 100644 nouveau/Android.bp
 delete mode 100644 nouveau/Android.sources.bp
 delete mode 100644 omap/Android.bp
 delete mode 100644 omap/Android.sources.bp
 delete mode 100644 radeon/Android.bp
 delete mode 100644 radeon/Android.sources.bp
 delete mode 100644 tegra/Android.bp
 delete mode 100644 tests/Android.bp
 delete mode 100644 tests/modetest/Android.bp
 delete mode 100644 tests/modetest/Android.sources.bp
 delete mode 100644 tests/proptest/Android.bp
 delete mode 100644 tests/util/Android.bp
 delete mode 100644 tests/util/Android.sources.bp

diff --git a/Android.bp b/Android.bp
deleted file mode 100644
index 158f2660..00000000
--- a/Android.bp
+++ /dev/null
@@ -1,69 +0,0 @@
-//
-// Copyright © 2011-2012 Intel Corporation
-//
-// Permission is hereby granted, free of charge, to any person obtaining a
-// copy of this software and associated documentation files (the "Software"),
-// to deal in the Software without restriction, including without limitation
-// the rights to use, copy, modify, merge, publish, distribute, sublicense,
-// and/or sell copies of the Software, and to permit persons to whom the
-// Software is furnished to do so, subject to the following conditions:
-//
-// The above copyright notice and this permission notice (including the next
-// paragraph) shall be included in all copies or substantial portions of the
-// Software.
-//
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
-// THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
-// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
-// IN THE SOFTWARE.
-//
-
-subdirs = ["*"]
-build = ["Android.sources.bp"]
-
-cc_defaults {
-    name: "libdrm_defaults",
-    cflags: [
-        // XXX: Consider moving these to config.h analogous to autoconf.
-        "-DMAJOR_IN_SYSMACROS=1",
-        "-DHAVE_VISIBILITY=1",
-        "-DHAVE_LIBDRM_ATOMIC_PRIMITIVES=1",
-
-        "-Wall",
-        "-Werror",
-        "-Wno-deprecated-declarations",
-        "-Wno-format",
-        "-Wno-gnu-variable-sized-type-not-at-end",
-        "-Wno-implicit-function-declaration",
-        "-Wno-int-conversion",
-        "-Wno-missing-field-initializers",
-        "-Wno-pointer-arith",
-        "-Wno-unused-parameter",
-        "-Wno-unused-variable",
-    ],
-    export_system_include_dirs: ["."],
-}
-
-// Library for the device
-cc_library {
-    name: "libdrm",
-    recovery_available: true,
-    vendor_available: true,
-    host_supported: true,
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_sources",
-    ],
-
-    export_include_dirs: ["include/drm", "android"],
-
-    cflags: [
-        "-Wno-enum-conversion",
-        "-Wno-pointer-arith",
-        "-Wno-sign-compare",
-        "-Wno-tautological-compare",
-    ],
-}
diff --git a/Android.sources.bp b/Android.sources.bp
deleted file mode 100644
index 73356dd8..00000000
--- a/Android.sources.bp
+++ /dev/null
@@ -1,12 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_sources",
-    srcs: [
-        "xf86drm.c",
-        "xf86drmHash.c",
-        "xf86drmRandom.c",
-        "xf86drmSL.c",
-        "xf86drmMode.c",
-    ],
-}
diff --git a/amdgpu/Android.bp b/amdgpu/Android.bp
deleted file mode 100644
index 976f03e9..00000000
--- a/amdgpu/Android.bp
+++ /dev/null
@@ -1,16 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_amdgpu",
-
-    cflags: [
-	"-DAMDGPU_ASIC_ID_TABLE=\"/vendor/etc/hwdata/amdgpu.ids\""
-    ],
-
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_amdgpu_sources",
-    ],
-    vendor: true,
-    shared_libs: ["libdrm"],
-}
diff --git a/amdgpu/Android.sources.bp b/amdgpu/Android.sources.bp
deleted file mode 100644
index be85283d..00000000
--- a/amdgpu/Android.sources.bp
+++ /dev/null
@@ -1,15 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_amdgpu_sources",
-    srcs: [
-	"amdgpu_asic_id.c",
-        "amdgpu_bo.c",
-        "amdgpu_cs.c",
-        "amdgpu_device.c",
-        "amdgpu_gpu_info.c",
-        "amdgpu_vamgr.c",
-	"amdgpu_vm.c",
-        "handle_table.c",
-    ],
-}
diff --git a/data/Android.bp b/data/Android.bp
deleted file mode 100644
index 47f64371..00000000
--- a/data/Android.bp
+++ /dev/null
@@ -1,6 +0,0 @@
-prebuilt_etc {
-    name: "amdgpu.ids",
-    proprietary: true,
-    sub_dir: "hwdata",
-    src: "amdgpu.ids",
-}
diff --git a/etnaviv/Android.bp b/etnaviv/Android.bp
deleted file mode 100644
index 21deda99..00000000
--- a/etnaviv/Android.bp
+++ /dev/null
@@ -1,11 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_etnaviv",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_etnaviv_sources",
-    ],
-    vendor: true,
-    shared_libs: ["libdrm"],
-}
diff --git a/etnaviv/Android.sources.bp b/etnaviv/Android.sources.bp
deleted file mode 100644
index aa828900..00000000
--- a/etnaviv/Android.sources.bp
+++ /dev/null
@@ -1,13 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_etnaviv_sources",
-    srcs: [
-        "etnaviv_device.c",
-        "etnaviv_gpu.c",
-        "etnaviv_bo.c",
-        "etnaviv_bo_cache.c",
-        "etnaviv_pipe.c",
-        "etnaviv_cmd_stream.c",
-    ],
-}
diff --git a/freedreno/Android.bp b/freedreno/Android.bp
deleted file mode 100644
index 9fca9b12..00000000
--- a/freedreno/Android.bp
+++ /dev/null
@@ -1,11 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_freedreno",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_freedreno_sources",
-    ],
-    vendor: true,
-    shared_libs: ["libdrm"],
-}
diff --git a/freedreno/Android.sources.bp b/freedreno/Android.sources.bp
deleted file mode 100644
index 3c1ca316..00000000
--- a/freedreno/Android.sources.bp
+++ /dev/null
@@ -1,16 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_freedreno_sources",
-    srcs: [
-        "freedreno_device.c",
-        "freedreno_pipe.c",
-        "freedreno_ringbuffer.c",
-        "freedreno_bo.c",
-        "freedreno_bo_cache.c",
-        "msm/msm_bo.c",
-        "msm/msm_device.c",
-        "msm/msm_pipe.c",
-        "msm/msm_ringbuffer.c",
-    ],
-}
diff --git a/intel/Android.bp b/intel/Android.bp
deleted file mode 100644
index 22713acc..00000000
--- a/intel/Android.bp
+++ /dev/null
@@ -1,36 +0,0 @@
-//
-// Copyright © 2011 Intel Corporation
-//
-// Permission is hereby granted, free of charge, to any person obtaining a
-// copy of this software and associated documentation files (the "Software"),
-// to deal in the Software without restriction, including without limitation
-// the rights to use, copy, modify, merge, publish, distribute, sublicense,
-// and/or sell copies of the Software, and to permit persons to whom the
-// Software is furnished to do so, subject to the following conditions:
-//
-// The above copyright notice and this permission notice (including the next
-// paragraph) shall be included in all copies or substantial portions of the
-// Software.
-//
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
-// THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
-// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
-// IN THE SOFTWARE.
-//
-
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_intel",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_intel_sources",
-    ],
-    vendor: true,
-
-    // Removed dependency to libpciaccess: not used on Android
-    shared_libs: ["libdrm"],
-}
diff --git a/intel/Android.sources.bp b/intel/Android.sources.bp
deleted file mode 100644
index 46e0328f..00000000
--- a/intel/Android.sources.bp
+++ /dev/null
@@ -1,13 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_intel_sources",
-    srcs: [
-        "intel_bufmgr.c",
-        "intel_bufmgr_fake.c",
-        "intel_bufmgr_gem.c",
-        "intel_decode.c",
-        "intel_chipset.c",
-        "mm.c",
-    ],
-}
diff --git a/libkms/Android.bp b/libkms/Android.bp
deleted file mode 100644
index b09dbf42..00000000
--- a/libkms/Android.bp
+++ /dev/null
@@ -1,15 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libkms",
-    defaults: [
-        "libdrm_defaults",
-        "libkms_sources",
-        "libkms_vmwgfx_sources",
-        "libkms_intel_sources",
-        "libkms_nouveau_sources",
-        "libkms_radeon_sources",
-    ],
-    vendor: true,
-    shared_libs: ["libdrm"],
-}
diff --git a/libkms/Android.sources.bp b/libkms/Android.sources.bp
deleted file mode 100644
index 5582f235..00000000
--- a/libkms/Android.sources.bp
+++ /dev/null
@@ -1,38 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libkms_sources",
-    srcs: [
-        "linux.c",
-        "dumb.c",
-        "api.c",
-    ],
-}
-
-cc_defaults {
-    name: "libkms_vmwgfx_sources",
-    srcs: [
-        "vmwgfx.c",
-    ],
-}
-
-cc_defaults {
-    name: "libkms_intel_sources",
-    srcs: [
-        "intel.c",
-    ],
-}
-
-cc_defaults {
-    name: "libkms_nouveau_sources",
-    srcs: [
-        "nouveau.c",
-    ],
-}
-
-cc_defaults {
-    name: "libkms_radeon_sources",
-    srcs: [
-        "radeon.c",
-    ],
-}
diff --git a/nouveau/Android.bp b/nouveau/Android.bp
deleted file mode 100644
index 12c37e3d..00000000
--- a/nouveau/Android.bp
+++ /dev/null
@@ -1,11 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_nouveau",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_nouveau_sources",
-    ],
-    vendor: true,
-    shared_libs: ["libdrm"],
-}
diff --git a/nouveau/Android.sources.bp b/nouveau/Android.sources.bp
deleted file mode 100644
index 5ecdb53c..00000000
--- a/nouveau/Android.sources.bp
+++ /dev/null
@@ -1,11 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_nouveau_sources",
-    srcs: [
-        "nouveau.c",
-        "pushbuf.c",
-        "bufctx.c",
-        "abi16.c",
-    ],
-}
diff --git a/omap/Android.bp b/omap/Android.bp
deleted file mode 100644
index 05ca7d2d..00000000
--- a/omap/Android.bp
+++ /dev/null
@@ -1,12 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_omap",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_omap_sources",
-    ],
-    vendor: true,
-
-    shared_libs: ["libdrm"],
-}
diff --git a/omap/Android.sources.bp b/omap/Android.sources.bp
deleted file mode 100644
index 3c7da94a..00000000
--- a/omap/Android.sources.bp
+++ /dev/null
@@ -1,8 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_omap_sources",
-    srcs: [
-	"omap_drm.c",
-    ],
-}
diff --git a/radeon/Android.bp b/radeon/Android.bp
deleted file mode 100644
index 9d0a09ec..00000000
--- a/radeon/Android.bp
+++ /dev/null
@@ -1,11 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_library_shared {
-    name: "libdrm_radeon",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_radeon_sources",
-    ],
-    vendor: true,
-    shared_libs: ["libdrm"],
-}
diff --git a/radeon/Android.sources.bp b/radeon/Android.sources.bp
deleted file mode 100644
index 820ac4d6..00000000
--- a/radeon/Android.sources.bp
+++ /dev/null
@@ -1,13 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_radeon_sources",
-    srcs: [
-        "radeon_bo_gem.c",
-        "radeon_cs_gem.c",
-        "radeon_cs_space.c",
-        "radeon_bo.c",
-        "radeon_cs.c",
-        "radeon_surface.c",
-    ],
-}
diff --git a/tegra/Android.bp b/tegra/Android.bp
deleted file mode 100644
index 33eaf6c5..00000000
--- a/tegra/Android.bp
+++ /dev/null
@@ -1,14 +0,0 @@
-cc_library_shared {
-    name: "libdrm_tegra",
-    vendor: true,
-    shared_libs: ["libdrm"],
-
-    srcs: ["tegra.c"],
-
-    cflags: [
-        "-DHAVE_LIBDRM_ATOMIC_PRIMITIVES=1",
-        "-Wall",
-        "-Werror",
-        "-Wno-unused-variable",
-    ],
-}
diff --git a/tests/Android.bp b/tests/Android.bp
deleted file mode 100644
index cdc6c2cf..00000000
--- a/tests/Android.bp
+++ /dev/null
@@ -1,6 +0,0 @@
-subdirs = ["*"]
-
-cc_library_headers {
-    name: "libdrm_test_headers",
-    export_include_dirs: ["."],
-}
diff --git a/tests/modetest/Android.bp b/tests/modetest/Android.bp
deleted file mode 100644
index ca811fee..00000000
--- a/tests/modetest/Android.bp
+++ /dev/null
@@ -1,12 +0,0 @@
-build = ["Android.sources.bp"]
-
-cc_test {
-    name: "modetest",
-    defaults: [
-        "libdrm_defaults",
-        "modetest_sources",
-    ],
-
-    shared_libs: ["libdrm"],
-    static_libs: ["libdrm_util"],
-}
diff --git a/tests/modetest/Android.sources.bp b/tests/modetest/Android.sources.bp
deleted file mode 100644
index c6aca2ef..00000000
--- a/tests/modetest/Android.sources.bp
+++ /dev/null
@@ -1,10 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "modetest_sources",
-    srcs: [
-        "buffers.c",
-        "cursor.c",
-        "modetest.c",
-    ],
-}
diff --git a/tests/proptest/Android.bp b/tests/proptest/Android.bp
deleted file mode 100644
index 28c87e91..00000000
--- a/tests/proptest/Android.bp
+++ /dev/null
@@ -1,8 +0,0 @@
-cc_test {
-    name: "proptest",
-    defaults: ["libdrm_defaults"],
-    srcs: ["proptest.c"],
-
-    shared_libs: ["libdrm"],
-    static_libs: ["libdrm_util"],
-}
diff --git a/tests/util/Android.bp b/tests/util/Android.bp
deleted file mode 100644
index 36d18206..00000000
--- a/tests/util/Android.bp
+++ /dev/null
@@ -1,35 +0,0 @@
-//
-// Copyright © 2015 NVIDIA Corporation
-//
-// Permission is hereby granted, free of charge, to any person obtaining a
-// copy of this software and associated documentation files (the "Software"),
-// to deal in the Software without restriction, including without limitation
-// the rights to use, copy, modify, merge, publish, distribute, sublicense,
-// and/or sell copies of the Software, and to permit persons to whom the
-// Software is furnished to do so, subject to the following conditions:
-//
-// The above copyright notice and this permission notice (including the next
-// paragraph) shall be included in all copies or substantial portions of the
-// Software.
-//
-// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
-// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
-// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
-// THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
-// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
-// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
-// IN THE SOFTWARE.
-//
-
-build = ["Android.sources.bp"]
-
-cc_library_static {
-    name: "libdrm_util",
-    defaults: [
-        "libdrm_defaults",
-        "libdrm_util_sources",
-    ],
-    shared_libs: ["libdrm"],
-    header_libs: ["libdrm_test_headers"],
-    export_header_lib_headers: ["libdrm_test_headers"],
-}
diff --git a/tests/util/Android.sources.bp b/tests/util/Android.sources.bp
deleted file mode 100644
index 529e1124..00000000
--- a/tests/util/Android.sources.bp
+++ /dev/null
@@ -1,10 +0,0 @@
-// Autogenerated with Android.sources.bp.mk
-
-cc_defaults {
-    name: "libdrm_util_sources",
-    srcs: [
-        "format.c",
-        "kms.c",
-        "pattern.c",
-    ],
-}
-- 
2.33.1

