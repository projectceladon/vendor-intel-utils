From 51ee10bce0472789d5831e566c4c220925966a9e Mon Sep 17 00:00:00 2001
From: ahs <amrita.h.s@intel.com>
Date: Fri, 19 Jun 2020 14:40:32 +0530
Subject: [PATCH] 3GenGC Base Image

Change-Id: I56664eb9ba3c005aec7c30b6d0a81ae8db890618
Tracked-On:
Signed-off-by: ahs <amrita.h.s@intel.com>
---
 runtime/runtime.cc | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/runtime/runtime.cc b/runtime/runtime.cc
index 51a40e7..ba08e34 100644
--- a/runtime/runtime.cc
+++ b/runtime/runtime.cc
@@ -666,6 +666,9 @@ void Runtime::PostZygoteFork() {
 void Runtime::CallExitHook(jint status) {
   if (exit_ != nullptr) {
     ScopedThreadStateChange tsc(Thread::Current(), kNative);
+    if (dump_gc_performance_on_shutdown_) {
+      heap_->DumpGcPerformanceInfo(LOG_STREAM(INFO));
+    }
     exit_(status);
     LOG(WARNING) << "Exit hook returned instead of exiting!";
   }
-- 
2.7.4

