From 1cf45e153ba5616bcb652e3bba62ad5f0cd56ab0 Mon Sep 17 00:00:00 2001
From: Salih <muhammadhx.salih@intel.com>
Date: Sat, 25 May 2019 01:08:33 +0530
Subject: [PATCH] [WA][HACK] DO NOT UPSTREAM: Change value of SD card index in
 WHL

Tracked-On: https://jira.devtools.intel.com/browse/OAM-79955

Signed-off-by: Salih <muhammadhx.salih@intel.com>
---
 drivers/mmc/host/sdhci-pci-core.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/mmc/host/sdhci-pci-core.c b/drivers/mmc/host/sdhci-pci-core.c
index 55fdf0a8da80..3bfaaf07f7e6 100644
--- a/drivers/mmc/host/sdhci-pci-core.c
+++ b/drivers/mmc/host/sdhci-pci-core.c
@@ -922,7 +922,7 @@ static int byt_sd_probe_slot(struct sdhci_pci_slot *slot)
 	byt_probe_slot(slot);
 	slot->host->mmc->caps |= MMC_CAP_WAIT_WHILE_BUSY |
 				 MMC_CAP_AGGRESSIVE_PM | MMC_CAP_CD_WAKE;
-	slot->cd_idx = 0;
+	slot->cd_idx = 2;
 	slot->cd_override_level = true;
 	if (slot->chip->pdev->device == PCI_DEVICE_ID_INTEL_BXT_SD ||
 	    slot->chip->pdev->device == PCI_DEVICE_ID_INTEL_BXTM_SD ||
-- 
2.21.0

