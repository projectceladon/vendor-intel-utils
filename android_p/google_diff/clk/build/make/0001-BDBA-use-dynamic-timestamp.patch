From 3192f942c59f8b810ce285bee839de736428a59f Mon Sep 17 00:00:00 2001
From: "jialei.feng" <jialeix.feng@intel.com>
Date: Mon, 23 Dec 2019 17:35:20 +0800
Subject: [PATCH] BDBA: use dynamic timestamp

Signed-off-by: jialei.feng <jialeix.feng@intel.com>
---
 tools/releasetools/add_img_to_target_files.py | 19 -------------------
 1 file changed, 19 deletions(-)

diff --git a/tools/releasetools/add_img_to_target_files.py b/tools/releasetools/add_img_to_target_files.py
index f68976e..721a7f9 100755
--- a/tools/releasetools/add_img_to_target_files.py
+++ b/tools/releasetools/add_img_to_target_files.py
@@ -45,7 +45,6 @@ Usage:  add_img_to_target_files [flag] target_files
 
 from __future__ import print_function
 
-import datetime
 import os
 import shlex
 import shutil
@@ -241,12 +240,6 @@ def CreateImage(input_dir, info_dict, what, output_file, block_list=None):
   if fstab and mount_point in fstab:
     image_props["fs_type"] = fstab[mount_point].fs_type
 
-  # Use a fixed timestamp (01/01/2009) when packaging the image.
-  # Bug: 24377993
-  epoch = datetime.datetime.fromtimestamp(0)
-  timestamp = (datetime.datetime(2009, 1, 1) - epoch).total_seconds()
-  image_props["timestamp"] = int(timestamp)
-
   if what == "system":
     fs_config_prefix = ""
   else:
@@ -319,12 +312,6 @@ def AddUserdata(output_zip):
 
   print("creating userdata.img...")
 
-  # Use a fixed timestamp (01/01/2009) when packaging the image.
-  # Bug: 24377993
-  epoch = datetime.datetime.fromtimestamp(0)
-  timestamp = (datetime.datetime(2009, 1, 1) - epoch).total_seconds()
-  image_props["timestamp"] = int(timestamp)
-
   if OPTIONS.info_dict.get("userdata_img_with_data") == "true":
     user_dir = os.path.join(OPTIONS.input_tmp, "DATA")
   else:
@@ -467,12 +454,6 @@ def AddCache(output_zip):
 
   print("creating cache.img...")
 
-  # Use a fixed timestamp (01/01/2009) when packaging the image.
-  # Bug: 24377993
-  epoch = datetime.datetime.fromtimestamp(0)
-  timestamp = (datetime.datetime(2009, 1, 1) - epoch).total_seconds()
-  image_props["timestamp"] = int(timestamp)
-
   user_dir = common.MakeTempDir()
 
   fstab = OPTIONS.info_dict["fstab"]
-- 
2.7.4

