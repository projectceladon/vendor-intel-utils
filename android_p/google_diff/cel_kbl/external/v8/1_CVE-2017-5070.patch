From 41a5b45d936f9f89ea18601f94428ed4539cc44d Mon Sep 17 00:00:00 2001
From: zhongjie <zhongjie.shi@intel.com>
Date: Thu, 14 Feb 2019 19:39:12 +0800
Subject: [PATCH] CVE-2017-5070 fix

Reference https://chromium.googlesource.com/v8/v8.git/+/e33fd30777f99a0d6e16b16d096a2663b1031457%5E%21/#F0

Change-Id: Iaba5ebf5d620095d5a74a4ec3be62081d001ac10
Tracked-On:
Signed-off-by: zhongjie <zhongjie.shi@intel.com>
---

diff --git a/src/crankshaft/hydrogen-alias-analysis.h b/src/crankshaft/hydrogen-alias-analysis.h
index 1f32b7ac..d06aabc 100644
--- a/src/crankshaft/hydrogen-alias-analysis.h
+++ b/src/crankshaft/hydrogen-alias-analysis.h
@@ -43,7 +43,7 @@
     }
 
     // Constant objects can be distinguished statically.
-    if (a->IsConstant()) {
+    if (a->IsConstant() && b->IsConstant()) {
       return a->Equals(b) ? kMustAlias : kNoAlias;
     }
     return kMayAlias;
