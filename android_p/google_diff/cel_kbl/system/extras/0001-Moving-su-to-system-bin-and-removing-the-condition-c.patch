From 20b4391458314e55e1582d53a9e37a4760317bfe Mon Sep 17 00:00:00 2001
From: rnaidu <ramya.v.naidu@intel.com>
Date: Tue, 9 Apr 2019 09:49:31 +0530
Subject: [PATCH] Moving su to /system/bin/ and removing the condition check to
 enable the root access to su

Change-Id: I6517f811b6c4286adf20d1b1db15ac8358b7d706
Tracked-On: N/A
Signed-off-by: rnaidu <ramya.v.naidu@intel.com>
---
 su/Android.mk | 2 +-
 su/su.cpp     | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/su/Android.mk b/su/Android.mk
index 92ad5e31..c9097796 100644
--- a/su/Android.mk
+++ b/su/Android.mk
@@ -7,7 +7,7 @@ LOCAL_SRC_FILES:= su.cpp
 
 LOCAL_MODULE:= su
 
-LOCAL_MODULE_PATH := $(TARGET_OUT_OPTIONAL_EXECUTABLES)
+LOCAL_MODULE_PATH := $(TARGET_OUT_EXECUTABLES)
 LOCAL_MODULE_TAGS := debug
 
 include $(BUILD_EXECUTABLE)
diff --git a/su/su.cpp b/su/su.cpp
index f3e4ff03..00a41a47 100644
--- a/su/su.cpp
+++ b/su/su.cpp
@@ -80,8 +80,8 @@ void extract_uidgids(const char* uidgids, uid_t* uid, gid_t* gid, gid_t* gids, i
 }
 
 int main(int argc, char** argv) {
-    uid_t current_uid = getuid();
-    if (current_uid != AID_ROOT && current_uid != AID_SHELL) error(1, 0, "not allowed");
+    //uid_t current_uid = getuid();
+    //if (current_uid != AID_ROOT && current_uid != AID_SHELL) error(1, 0, "not allowed");
 
     // Handle -h and --help.
     ++argv;
-- 
2.20.1

