From e1fa77454865d56354d33cf6ea9da23ead19f7f2 Mon Sep 17 00:00:00 2001
From: "Wang, ArvinX" <arvinx.wang@intel.com>
Date: Thu, 20 Jun 2019 17:59:59 +0800
Subject: [PATCH] Switch to software gatekeeperd

Change-Id: I633a8d8f87420d3407b81e8d26b547b48a37521d
Tracked-On: https://jira.devtools.intel.com/browse/OAM-
Signed-off-by: Wang, ArvinX <arvinx.wang@intel.com>
---
 gatekeeperd/gatekeeperd.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/gatekeeperd/gatekeeperd.cpp b/gatekeeperd/gatekeeperd.cpp
index 578176578..d6fcbb8dd 100644
--- a/gatekeeperd/gatekeeperd.cpp
+++ b/gatekeeperd/gatekeeperd.cpp
@@ -17,6 +17,7 @@
 #define LOG_TAG "gatekeeperd"
 
 #include "IGateKeeperService.h"
+#define LOG_NDEBUG 0
 
 #include <errno.h>
 #include <fcntl.h>
@@ -59,7 +60,7 @@ public:
     GateKeeperProxy() {
         clear_state_if_needed_done = false;
         hw_device = IGatekeeper::getService();
-
+        hw_device = nullptr;
         if (hw_device == nullptr) {
             ALOGW("falling back to software GateKeeper");
             soft_device.reset(new SoftGateKeeperDevice());
-- 
2.21.0

