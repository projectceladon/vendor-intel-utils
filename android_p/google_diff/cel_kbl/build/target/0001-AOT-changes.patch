From f5b75ac0f0e7ddacde3b91de97bf414dfa3de7b1 Mon Sep 17 00:00:00 2001
From: anuvarshini <anuvarshini.bc@intel.com>
Date: Tue, 7 Jul 2020 18:00:27 +0530
Subject: [PATCH] AOT changes

Signed-off-by: anuvarsh <anuvarshini.bc@intel.com>
Change-Id: I7987cb4607eb14e4913f7d6c62fe38aca7fbaf86
---
 target/product/runtime_libart.mk | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

diff --git a/target/product/runtime_libart.mk b/target/product/runtime_libart.mk
index bda4524..4dcc4af 100644
--- a/target/product/runtime_libart.mk
+++ b/target/product/runtime_libart.mk
@@ -67,7 +67,9 @@ PRODUCT_SYSTEM_DEFAULT_PROPERTIES += \
     dalvik.vm.usejit=true \
     dalvik.vm.usejitprofiles=true \
     dalvik.vm.dexopt.secondary=true \
-    dalvik.vm.appimageformat=lz4
+    dalvik.vm.appimageformat=lz4 \
+    dalvik.vm.dex2oat-filter=speed \
+    dalvik.vm.image-dex2oat-filter=speed
 
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.dalvik.vm.native.bridge=0
@@ -76,21 +78,21 @@ PRODUCT_PROPERTY_OVERRIDES += \
 # On eng builds, make "boot" reasons only extract for faster turnaround.
 ifeq (eng,$(TARGET_BUILD_VARIANT))
     PRODUCT_SYSTEM_DEFAULT_PROPERTIES += \
-        pm.dexopt.first-boot=extract \
-        pm.dexopt.boot=extract
+        pm.dexopt.first-boot=speed \
+        pm.dexopt.boot=speed
 else
     PRODUCT_SYSTEM_DEFAULT_PROPERTIES += \
-        pm.dexopt.first-boot=quicken \
-        pm.dexopt.boot=verify
+        pm.dexopt.first-boot=speed \
+        pm.dexopt.boot=speed
 endif
 
 # The install filter is speed-profile in order to enable the use of
 # profiles from the dex metadata files. Note that if a profile is not provided
 # or if it is empty speed-profile is equivalent to (quicken + empty app image).
 PRODUCT_SYSTEM_DEFAULT_PROPERTIES += \
-    pm.dexopt.install=speed-profile \
-    pm.dexopt.bg-dexopt=speed-profile \
-    pm.dexopt.ab-ota=speed-profile \
+    pm.dexopt.install=speed \
+    pm.dexopt.bg-dexopt=speed \
+    pm.dexopt.ab-ota=speed \
     pm.dexopt.inactive=verify \
     pm.dexopt.shared=speed
 
-- 
2.7.4

