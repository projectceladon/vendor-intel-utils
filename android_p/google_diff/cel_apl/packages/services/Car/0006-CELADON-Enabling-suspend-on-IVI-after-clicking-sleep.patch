From c9ac32cd245546d6909097639249bc1a6e838abe Mon Sep 17 00:00:00 2001
From: Madhusudhan S <madhusudhan.s@intel.com>
Date: Fri, 26 Oct 2018 11:56:17 +0530
Subject: [PATCH] [CELADON]Enabling suspend on IVI after clicking sleep from
 the power button menu.

Change-Id: Ibf21d49b920905353dee029e2a644d8dd8adccf4
Tracked-on: OAM-56502
Signed-off-by: Madhusudhan S <madhusudhan.s@intel.com>
---
 service/src/com/android/car/CarPowerManagementService.java | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/service/src/com/android/car/CarPowerManagementService.java b/service/src/com/android/car/CarPowerManagementService.java
index 57ccf62..107c512 100644
--- a/service/src/com/android/car/CarPowerManagementService.java
+++ b/service/src/com/android/car/CarPowerManagementService.java
@@ -755,6 +755,8 @@ public class CarPowerManagementService extends ICarPower.Stub implements CarServ
                     break;
                 case MSG_MAIN_DISPLAY_STATE_CHANGE:
                     doHandleMainDisplayStateChange((Boolean) msg.obj);
+		    //calls force suspend to enter into S3
+                    mSystemInterface.enterDeepSleep(getWakeupTime());
                     break;
                 case MSG_PROCESSING_COMPLETE:
                     doHandleProcessingComplete(msg.arg1 == 1);
-- 
2.7.4

