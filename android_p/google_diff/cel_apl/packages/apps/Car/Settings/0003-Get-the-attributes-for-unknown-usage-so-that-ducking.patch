From 4422fca914013f2f0a49333c591a5ae0c7db1576 Mon Sep 17 00:00:00 2001
From: "M, Kumar K" <kumar.k.m@intel.com>
Date: Mon, 3 Dec 2018 19:46:07 +0530
Subject: [PATCH] Get the attributes for unknown usage so that ducking will be
 applied to alarm/notification

Change-Id: I37b5b77d9df7e4281e494ba9fab2c780ac6f1df0
Tracked-On:
Signed-off-by: M, Kumar K <kumar.k.m@intel.com>
---
 src/com/android/car/settings/sound/VolumeLineItem.java | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/com/android/car/settings/sound/VolumeLineItem.java b/src/com/android/car/settings/sound/VolumeLineItem.java
index 2932be3..ec61cd7 100644
--- a/src/com/android/car/settings/sound/VolumeLineItem.java
+++ b/src/com/android/car/settings/sound/VolumeLineItem.java
@@ -62,7 +62,8 @@ public class VolumeLineItem extends SeekbarListItem implements SeekBar.OnSeekBar
         mCarAudioManager = carAudioManager;
         mUiHandler = new Handler(Looper.getMainLooper());
         mRingtone = RingtoneManager.getRingtone(context, getRingtoneUri(usage));
-        mRingtone.setAudioAttributes(new AudioAttributes.Builder().setUsage(usage).build());
+        //Getting attributes for unknown usage, to support ducking on ringtone/alarm
+        mRingtone.setAudioAttributes(new AudioAttributes.Builder().setUsage(0).build());
         mVolumeGroupId = volumeGroupId;
         mMinVolume = getMinVolume();
         setMax(getMaxSeekbarValue());
-- 
1.9.1

