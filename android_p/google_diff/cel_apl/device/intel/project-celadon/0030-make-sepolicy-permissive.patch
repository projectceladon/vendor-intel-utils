From 74e2825f2454902dd9d8dbe6134cc6807390ab56 Mon Sep 17 00:00:00 2001
From: swaroopb <swaroop.balan@intel.com>
Date: Fri, 1 Feb 2019 10:52:20 +0530
Subject: [PATCH] make sepolicy permissive

Tracked-On:
---
 cel_apl/BoardConfig.mk | 8 +++++++-
 cel_apl/mixins.spec    | 2 +-
 2 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/cel_apl/BoardConfig.mk b/cel_apl/BoardConfig.mk
index fbb5e94..d9b7c03 100644
--- a/cel_apl/BoardConfig.mk
+++ b/cel_apl/BoardConfig.mk
@@ -14,7 +14,13 @@ BOARD_OEM_VARS += $(TARGET_DEVICE_DIR)/oemvars.txt
 ##############################################################
 KERNEL_CROSS_COMPILE_WRAPPER := x86_64-linux-android-
 ##############################################################
-# Source: device/intel/mixins/groups/sepolicy/enforcing/BoardConfig.mk
+# Source: device/intel/mixins/groups/sepolicy/permissive/BoardConfig.mk.1
+##############################################################
+# start kernel in permissive mode, this way we don't
+# need 'setenforce 0' from init.rc files
+BOARD_KERNEL_CMDLINE += enforcing=0 androidboot.selinux=permissive
+##############################################################
+# Source: device/intel/mixins/groups/sepolicy/permissive/BoardConfig.mk
 ##############################################################
 # SELinux Policy
 BOARD_SEPOLICY_DIRS += device/intel/project-celadon/sepolicy
diff --git a/cel_apl/mixins.spec b/cel_apl/mixins.spec
index da08fab..1b35fd1 100644
--- a/cel_apl/mixins.spec
+++ b/cel_apl/mixins.spec
@@ -9,7 +9,7 @@ treble: true
 vndk: true
 2ndstage: oemvars
 project-celadon: default
-sepolicy: enforcing
+sepolicy: permissive
 graphics: project-celadon(gen9+=true,hwc2=true,vulkan=true,drmhwc=false,minigbm=true,gralloc1=true)
 media: project-celadon(mediasdk=false,media_sdk_source=false)
 ethernet: dhcp
-- 
2.20.1

