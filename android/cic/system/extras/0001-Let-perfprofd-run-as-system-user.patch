From 5391d6f7dcc86440fba8bc4966cef5a657b9097d Mon Sep 17 00:00:00 2001
From: "ji, zhenlong z" <zhenlong.z.ji@intel.com>
Date: Thu, 30 Apr 2020 14:32:37 +0800
Subject: [PATCH] Let perfprofd run as system user

Grant the necessary capabilities to perfprofd.

Change-Id: I3a8b13fa0bf3b3fedbad7b2be070319fd2949039
Signed-off-by: ji, zhenlong z <zhenlong.z.ji@intel.com>
---
 perfprofd/perfprofd.rc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/perfprofd/perfprofd.rc b/perfprofd/perfprofd.rc
index d410a1e5..482c524a 100644
--- a/perfprofd/perfprofd.rc
+++ b/perfprofd/perfprofd.rc
@@ -1,6 +1,6 @@
 service perfprofd /system/bin/perfprofd --binder
     class late_start
-    user root
+    capabilities DAC_OVERRIDE DAC_READ_SEARCH SYS_ADMIN SYS_RESOURCE SYS_PTRACE IPC_LOCK
     group root wakelock
     oneshot
     writepid /dev/cpuset/system-background/tasks
-- 
2.20.1

