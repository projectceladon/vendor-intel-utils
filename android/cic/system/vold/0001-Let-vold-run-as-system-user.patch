From 516582a73bcfd14150f1bfc1e32eee8878e0d304 Mon Sep 17 00:00:00 2001
From: "ji, zhenlong z" <zhenlong.z.ji@intel.com>
Date: Thu, 30 Apr 2020 14:33:44 +0800
Subject: [PATCH] Let vold run as system user

Grant the necessary capabilities to vold.

Change-Id: I79d8120d1680d5eec28ae3cae2fdc4db5127a84c
Signed-off-by: ji, zhenlong z <zhenlong.z.ji@intel.com>
---
 vold.rc | 1 +
 1 file changed, 1 insertion(+)

diff --git a/vold.rc b/vold.rc
index 7d14453..5abd71a 100644
--- a/vold.rc
+++ b/vold.rc
@@ -2,6 +2,7 @@ service vold /system/bin/vold \
         --blkid_context=u:r:blkid:s0 --blkid_untrusted_context=u:r:blkid_untrusted:s0 \
         --fsck_context=u:r:fsck:s0 --fsck_untrusted_context=u:r:fsck_untrusted:s0
     class core
+    capabilities DAC_OVERRIDE DAC_READ_SEARCH SETUID SETGID SYS_RESOURCE MKNOD NET_ADMIN SYS_ADMIN CHOWN FOWNER FSETID SYS_PTRACE KILL SYS_NICE SYS_CHROOT
     ioprio be 2
     writepid /dev/cpuset/foreground/tasks
     shutdown critical
-- 
2.20.1

