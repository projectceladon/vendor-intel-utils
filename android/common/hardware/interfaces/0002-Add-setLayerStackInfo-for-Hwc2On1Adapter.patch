From 82525439c30e10ae4ef67728acac39173c5755c8 Mon Sep 17 00:00:00 2001
From: Marc Mao <marc.mao@intel.com>
Date: Fri, 27 Sep 2019 14:54:21 +0800
Subject: [PATCH 2/2] Add setLayerStackInfo for Hwc2On1Adapter

Change-Id: I9a9f140786a936d98f3f657837d7f4a42850bfa0
Tracked-On:
Signed-off-by: Marc Mao <marc.mao@intel.com>
---
 .../2.1/utils/hwc2on1adapter/HWC2On1Adapter.cpp        |  5 +++++
 .../include/hwc2on1adapter/HWC2On1Adapter.h            | 10 ++++++++++
 2 files changed, 15 insertions(+)

diff --git a/graphics/composer/2.1/utils/hwc2on1adapter/HWC2On1Adapter.cpp b/graphics/composer/2.1/utils/hwc2on1adapter/HWC2On1Adapter.cpp
index 6551a99a4..50b250c81 100644
--- a/graphics/composer/2.1/utils/hwc2on1adapter/HWC2On1Adapter.cpp
+++ b/graphics/composer/2.1/utils/hwc2on1adapter/HWC2On1Adapter.cpp
@@ -303,6 +303,11 @@ hwc2_function_pointer_t HWC2On1Adapter::doGetFunction(
         case FunctionDescriptor::SetLayerZOrder:
             return asFP<HWC2_PFN_SET_LAYER_Z_ORDER>(setLayerZOrderHook);
 
+#ifdef SUPPORT_LAYER_TASK_INFO
+        case FunctionDescriptor::SetLayerTaskInfo:
+            return asFP<HWC2_PFN_SET_LAYER_TASK_INFO>(setLayerTaskInfoHook);
+#endif
+
         default:
             ALOGE("doGetFunction: Unknown function descriptor: %d (%s)",
                     static_cast<int32_t>(descriptor),
diff --git a/graphics/composer/2.1/utils/hwc2on1adapter/include/hwc2on1adapter/HWC2On1Adapter.h b/graphics/composer/2.1/utils/hwc2on1adapter/include/hwc2on1adapter/HWC2On1Adapter.h
index 3badfce07..8b5e3b27c 100644
--- a/graphics/composer/2.1/utils/hwc2on1adapter/include/hwc2on1adapter/HWC2On1Adapter.h
+++ b/graphics/composer/2.1/utils/hwc2on1adapter/include/hwc2on1adapter/HWC2On1Adapter.h
@@ -667,6 +667,16 @@ private:
                 layer, z);
     }
 
+#ifdef SUPPORT_LAYER_TASK_INFO
+    static int32_t setLayerTaskInfoHook(hwc2_device_t* device,
+            hwc2_display_t display, hwc2_layer_t layer,
+            uint32_t stackId, uint32_t taskId, uint32_t userId, uint32_t index) {
+        void(device), void(display), void(layer);
+        void(stackId), void(taskId), void(userId), void(index);
+        return 0;
+    }
+#endif
+
     // Adapter internals
 
     void populateCapabilities();
-- 
2.17.1

