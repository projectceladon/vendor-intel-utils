From 90d82559271c89bca51bcaaa703ea8481d781177 Mon Sep 17 00:00:00 2001
From: "Chen, Yu" <yu.y.chen@intel.com>
Date: Sat, 12 Mar 2022 16:40:50 +0800
Subject: [PATCH] fix KW issue

Tracked-On: OAM-101343
Signed-off-by: Chen, Yu <yu.y.chen@intel.com>
Change-Id: I34d8ba51c225778acc22216ace503f92b57386f8
---
 intel/intel_bufmgr_gem.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/intel/intel_bufmgr_gem.c b/intel/intel_bufmgr_gem.c
index 4f17667e..f14bb920 100644
--- a/intel/intel_bufmgr_gem.c
+++ b/intel/intel_bufmgr_gem.c
@@ -1736,6 +1736,8 @@ static int mmap_write(drm_intel_bo *bo, unsigned long offset,
 	}
 
 	assert(map);
+	if (NULL == map)
+		return -1;
 	memcpy((char *)map + offset, buf, length);
 	drm_intel_gem_bo_unmap(bo);
 	return 0;
@@ -1762,6 +1764,8 @@ static int mmap_read(drm_intel_bo *bo, unsigned long offset,
 	}
 
 	assert(map);
+	if (NULL == map)
+		return -1;
 	memcpy(buf, (char *)map + offset, length);
 	drm_intel_gem_bo_unmap(bo);
 	return 0;
-- 
2.40.1

