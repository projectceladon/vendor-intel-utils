From 002e21c5dc74245607b3aca41c89a98be16366c9 Mon Sep 17 00:00:00 2001
From: kanlihu <kanli.hu@intel.com>
Date: Tue, 21 Nov 2023 00:02:29 +0800
Subject: [PATCH] dgpu force connected

---
 drivers/gpu/drm/i915/display/intel_ddi.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/i915/display/intel_ddi.c b/drivers/gpu/drm/i915/display/intel_ddi.c
index caee701f6100..139329f7cd5e 100644
--- a/drivers/gpu/drm/i915/display/intel_ddi.c
+++ b/drivers/gpu/drm/i915/display/intel_ddi.c
@@ -4035,9 +4035,18 @@ intel_ddi_hotplug(struct intel_encoder *encoder,
 static bool lpt_digital_port_connected(struct intel_encoder *encoder)
 {
 	struct drm_i915_private *dev_priv = to_i915(encoder->base.dev);
+	struct device *dev = (&dev_priv->drm)->dev;
+	bool ret;
 	u32 bit = dev_priv->display.hotplug.pch_hpd[encoder->hpd_pin];
 
-	return intel_de_read(dev_priv, SDEISR) & bit;
+	ret =  intel_de_read(dev_priv, SDEISR) & bit;
+
+	if (!strcmp(dev_name(dev), "0000:00:02.0")) {
+	} else {
+		ret = true;
+	}
+
+	return ret;
 }
 
 static bool hsw_digital_port_connected(struct intel_encoder *encoder)
-- 
2.40.0

