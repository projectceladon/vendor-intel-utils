From b17bbb60131200da0c3b9cd4673ac398a752d9e4 Mon Sep 17 00:00:00 2001
From: jxiao12 <jin.xiao@intel.com>
Date: Wed, 4 Sep 2019 11:20:53 +0800
Subject: [PATCH 3/4] update ro.graphics.hwcomposer.kvm for qemu media

Change-Id: I585bebf6f83b835c7e8ddbe84271e69034819b0b
Tracked-On:
Signed-off-by: jxiao12 <jin.xiao@intel.com>
---
 groups/graphics/auto/auto_hal.in | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

diff --git a/groups/graphics/auto/auto_hal.in b/groups/graphics/auto/auto_hal.in
index 45afff4..7b3f7d8 100644
--- a/groups/graphics/auto/auto_hal.in
+++ b/groups/graphics/auto/auto_hal.in
@@ -2,22 +2,23 @@ auto_hal() {
 case "$(cat /proc/fb | head -1)" in
         0*inteldrmfb)
                 echo "intel"
+                setprop ro.hardware.hwcomposer intel
+                setprop ro.hardware.gralloc intel
 	        case "$(cat /sys/class/dmi/id/chassis_vendor | head -1)" in
-                QEMU)
-                                setprop use ro.graphics.hwcomposer.kvm true
+                        QEMU)
+                                setprop ro.graphics.hwcomposer.kvm true
                                 ;;
-                *)
-                                setprop use ro.graphics.hwcomposer.kvm false
+                        *)
+                                setprop ro.graphics.hwcomposer.kvm false
                                 ;;
-                setprop ro.hardware.hwcomposer intel
-                setprop ro.hardware.gralloc intel
+                esac
                 ;;
         0*)
                 echo "sw rendering"
-                setprop use ro.graphics.hwcomposer.kvm false
                 setprop ro.hardware.egl swiftshader
                 setprop ro.hardware.hwcomposer default
                 setprop ro.hardware.gralloc default
+                setprop ro.graphics.hwcomposer.kvm false
                 ;;
 esac
 }
-- 
2.7.4

