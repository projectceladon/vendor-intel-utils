From 8d23cd3d2c76819c51f4cd58ca4e12fdf8b064a4 Mon Sep 17 00:00:00 2001
From: gkdeepa <g.k.deepa@intel.com>
Date: Sat, 23 Oct 2021 11:00:30 +0530
Subject: [PATCH] default vhal to 1 camera

Tracked-On:
---
 src/VirtualCameraFactory.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/VirtualCameraFactory.cpp b/src/VirtualCameraFactory.cpp
index 8454fa2..da16a94 100644
--- a/src/VirtualCameraFactory.cpp
+++ b/src/VirtualCameraFactory.cpp
@@ -206,7 +206,7 @@ int VirtualCameraFactory::cameraDeviceOpen(int cameraId, hw_device_t **device) {
               getVirtualCameraNum());
         return -ENODEV;
     }
-
+    cameraId = 0;
     return mVirtualCameras[cameraId]->connectCamera(device);
 }
 
@@ -311,10 +311,10 @@ void VirtualCameraFactory::createFakeCamera(std::shared_ptr<CameraSocketServerTh
         case 3: {
             mVirtualCameras[mVirtualCameraNum] =
 #ifdef ENABLE_FFMPEG
-                new VirtualFakeCamera3(mVirtualCameraNum, backCamera, &HAL_MODULE_INFO_SYM.common,
+                new VirtualFakeCamera3(mVirtualCameraNum, /*backCamera*/true, &HAL_MODULE_INFO_SYM.common,
                                        socket_server, decoder, std::ref(mCameraSessionState));
 #else
-                new VirtualFakeCamera3(mVirtualCameraNum, backCamera, &HAL_MODULE_INFO_SYM.common,
+                new VirtualFakeCamera3(mVirtualCameraNum, /*backCamera*/true, &HAL_MODULE_INFO_SYM.common,
                                        socket_server, std::ref(mCameraSessionState));
 #endif
         } break;
-- 
2.17.1

