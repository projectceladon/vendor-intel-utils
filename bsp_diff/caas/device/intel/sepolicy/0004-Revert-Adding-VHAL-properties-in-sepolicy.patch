From 5bc7a7f9e2a93f8a1924ec31b27ea09b9e8a794d Mon Sep 17 00:00:00 2001
From: gkdeepa <g.k.deepa@intel.com>
Date: Fri, 17 Dec 2021 08:41:53 +0530
Subject: [PATCH] Revert "Adding VHAL properties in sepolicy"

This reverts commit b13536140ec16571e2875d4da22bfaed89fa90af.
---
 camera-ext/ext-camera-only/hal_camera_default.te | 4 ----
 camera-ext/ext-camera-only/logwrapper.te         | 1 -
 camera-ext/ext-camera-only/property.te           | 1 -
 camera-ext/ext-camera-only/property_contexts     | 8 --------
 camera-ext/ext-camera-only/vendor_init.te        | 1 -
 camera/property_contexts                         | 2 +-
 6 files changed, 1 insertion(+), 16 deletions(-)
 delete mode 100644 camera-ext/ext-camera-only/logwrapper.te
 delete mode 100644 camera-ext/ext-camera-only/property.te
 delete mode 100644 camera-ext/ext-camera-only/property_contexts
 delete mode 100644 camera-ext/ext-camera-only/vendor_init.te

diff --git a/camera-ext/ext-camera-only/hal_camera_default.te b/camera-ext/ext-camera-only/hal_camera_default.te
index e661125..e458b8c 100644
--- a/camera-ext/ext-camera-only/hal_camera_default.te
+++ b/camera-ext/ext-camera-only/hal_camera_default.te
@@ -6,7 +6,3 @@ allow hal_camera_default gpu_device:dir search;
 allow hal_camera_default hal_graphics_allocator_default_tmpfs:file { map read write };
 allow hal_camera_default hal_graphics_mapper_hwservice:hwservice_manager find;
 allow hal_camera_default hal_graphics_composer_default:fd use;
-allow hal_camera_default self:{ socket vsock_socket } { create read write listen accept bind };
-get_prop(hal_camera_default, vendor_camera_default_prop)
-set_prop(hal_camera_default, vendor_camera_default_prop)
-set_prop(vendor_init, vendor_camera_default_prop)
diff --git a/camera-ext/ext-camera-only/logwrapper.te b/camera-ext/ext-camera-only/logwrapper.te
deleted file mode 100644
index 0da1971..0000000
--- a/camera-ext/ext-camera-only/logwrapper.te
+++ /dev/null
@@ -1 +0,0 @@
-set_prop(logwrapper, vendor_camera_default_prop)
diff --git a/camera-ext/ext-camera-only/property.te b/camera-ext/ext-camera-only/property.te
deleted file mode 100644
index 905e3af..0000000
--- a/camera-ext/ext-camera-only/property.te
+++ /dev/null
@@ -1 +0,0 @@
-vendor_internal_prop(vendor_camera_default_prop)
diff --git a/camera-ext/ext-camera-only/property_contexts b/camera-ext/ext-camera-only/property_contexts
deleted file mode 100644
index 2a1f00c..0000000
--- a/camera-ext/ext-camera-only/property_contexts
+++ /dev/null
@@ -1,8 +0,0 @@
-ro.vendor.remote.sf.fake_camera                 u:object_r:vendor_camera_default_prop:s0
-ro.vendor.camera.in_frame_format.h264 u:object_r:vendor_camera_default_prop:s0
-ro.vendor.camera.in_frame_format.i420 u:object_r:vendor_camera_default_prop:s0
-ro.vendor.camera.decode.vaapi         u:object_r:vendor_camera_default_prop:s0
-ro.vendor.remote.sf.back_camera_hal             u:object_r:vendor_camera_default_prop:s0
-ro.vendor.remote.sf.front_camera_hal            u:object_r:vendor_camera_default_prop:s0
-ro.vendor.camera.transference         u:object_r:vendor_camera_default_prop:s0 
-vendor.camera.external         u:object_r:vendor_camera_default_prop:s0 
diff --git a/camera-ext/ext-camera-only/vendor_init.te b/camera-ext/ext-camera-only/vendor_init.te
deleted file mode 100644
index 72ae654..0000000
--- a/camera-ext/ext-camera-only/vendor_init.te
+++ /dev/null
@@ -1 +0,0 @@
-set_prop(vendor_init, vendor_camera_default_prop)
diff --git a/camera/property_contexts b/camera/property_contexts
index 7ff2510..c2bf2bc 100644
--- a/camera/property_contexts
+++ b/camera/property_contexts
@@ -1 +1 @@
-vendor.camera.                 u:object_r:vendor_camera_prop:s0
+vendor.camera.			u:object_r:vendor_camera_prop:s0
-- 
2.17.1

