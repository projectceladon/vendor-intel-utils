From 3247c6ff1547b6343f3025370cf3ffb565199b72 Mon Sep 17 00:00:00 2001
From: gkdeepa <g.k.deepa@intel.com>
Date: Mon, 13 Dec 2021 17:29:43 +0530
Subject: [PATCH] mixinup patch after revert VHAL in caas

Tracked-On:
---
 caas/device.mk    | 23 ++++++++---------------
 caas/manifest.xml |  1 -
 2 files changed, 8 insertions(+), 16 deletions(-)

diff --git a/caas/device.mk b/caas/device.mk
index 431b5eb..52c92d6 100644
--- a/caas/device.mk
+++ b/caas/device.mk
@@ -507,23 +507,10 @@ PRODUCT_COPY_FILES += \
 
 # External camera service
 PRODUCT_PACKAGES += android.hardware.camera.provider@2.4-external-service \
-                    android.hardware.camera.provider@2.4-service_64 \
                     android.hardware.camera.provider@2.4-impl
-#VHAL camera
-PRODUCT_PACKAGES += camera.$(TARGET_BOARD_PLATFORM) \
-                    camera.$(TARGET_BOARD_PLATFORM).jpeg
-
-PRODUCT_PROPERTY_OVERRIDES += ro.vendor.remote.sf.fake_camera ="both" \
-                              ro.vendor.camera.in_frame_format.h264=false \
-                              ro.vendor.camera.in_frame_format.i420=true \
-                              ro.vendor.camera.decode.vaapi=false \
-                              ro.vendor.remote.sf.back_camera_hal= \
-                              ro.vendor.remote.sf.front_camera_hal= \
-                              ro.vendor.camera.transference="VSOCK" \
-                              vendor.camera.external="VHAL"
-#removing not required apps
+
 # Only include test apps in eng or userdebug builds.
-#PRODUCT_PACKAGES_DEBUG += TestingCamera
+PRODUCT_PACKAGES_DEBUG += TestingCamera
 
 PRODUCT_PACKAGES += MultiCameraApp
 ##############################################################
@@ -581,6 +568,7 @@ FLAG_GMS_AVAILABLE ?= true
 ifeq ($(FLAG_GMS_AVAILABLE),true)
 $(call inherit-product-if-exists, vendor/google/gms/products/gms.mk)
 $(call inherit-product, vendor/partner_modules/build/mainline_modules.mk)
+MAINLINE_PATCH_LEVEL_1 := true
 endif
 ##############################################################
 # Source: device/intel/mixins/groups/debug-tools/true/product.mk
@@ -810,4 +798,9 @@ PRODUCT_DEFAULT_PROPERTY_OVERRIDES += vendor.sys.dump.peer_depth=3
 PRODUCT_DEFAULT_PROPERTY_OVERRIDES += vendor.sys.dump.stacks_timeout=1500
 
 endif
+##############################################################
+# Source: device/intel/mixins/groups/ipp/default/product.mk
+##############################################################
+PRODUCT_PACKAGES += libippcustom \
+                    libippcustom_vendor
 # ------------------ END MIX-IN DEFINITIONS ------------------
diff --git a/caas/manifest.xml b/caas/manifest.xml
index 86d15e5..af2f468 100644
--- a/caas/manifest.xml
+++ b/caas/manifest.xml
@@ -117,7 +117,6 @@
         <interface>
             <name>ICameraProvider</name>
             <instance>external/0</instance>
-            <instance>legacy/0</instance>
         </interface>
     </hal>
     <hal format="hidl">
-- 
2.17.1

