From a1fdeae427ffa6e02f66b62e0297341d1852197d Mon Sep 17 00:00:00 2001
From: Chen Lin Z <lin.z.chen@intel.com>
Date: Mon, 21 Oct 2019 14:59:51 +0800
Subject: [PATCH] Set old gpu property based on /proc/cpuinfo file

Tracked-On:
Signed-off-by: Chen Lin Z <lin.z.chen@intel.com>
---
 groups/graphics/auto/auto_hal.in | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/groups/graphics/auto/auto_hal.in b/groups/graphics/auto/auto_hal.in
index 1225c56..a170e2d 100644
--- a/groups/graphics/auto/auto_hal.in
+++ b/groups/graphics/auto/auto_hal.in
@@ -23,3 +23,12 @@ case "$(cat /proc/fb | grep inteldrmfb)" in
 esac
 }
 auto_hal&
+
+model_str=$(cat /proc/cpuinfo  | grep 'model name'  | uniq)
+var=$(echo $model_str | cut -d'-' -f2)
+gen=${var:0:1}
+echo $model_str | grep -i Celeron
+is_celeron=$?
+if [ "$gen" -lt "6" -a "$is_celeron" != "0" ]; then
+    setprop ro.hardware.oldgpu true
+fi
-- 
1.9.1

