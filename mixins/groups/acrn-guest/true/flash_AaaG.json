{
    "flash": {
        "commands": [
        {
                "command": "downloadfwos",
                "description": "Flashing IFWI",
                "flags": 0,
                "fw_dnx": "${dnxp_0x1}",
                "fw_image": "${ifwi_dnx}",
                "mandatory": true,
                "restrict": [
                    "fw_update"
                ],
                "retry": 1,
                "timeout": 480000,
                "tool": "dnxFwDownloader"
        },
        {
                "command": "clearrpmb",
                "description": "Clear SPI NOR RPMB",
                "device": "spi",
                "fw_dnx": "${dnxp_0x1}",
                "idx": 0,
                "mandatory": false,
                "restrict": [
                    "fw_update"
                ],
                "retry": 1,
                "timeout": 60000,
                "tool": "dnxFwDownloader"
        },
        {
            "args": "flashing unlock",
            "description": "Set device state to unlocked",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "flash gpt ${gpt}",
            "description": "Initialize the partition table",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "erase sos_boot",
            "description": "Erase sos_boot partition",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "erase sos_rootfs",
            "description": "Erase sos_rootfs partition",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "format sos_boot",
            "description": "Format sos_boot partition",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "format sos_rootfs",
            "block_scan": true,
            "description": "Format sos_rootfs partition",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 6000000,
            "tool": "fastboot"
        },
        {
            "args": "flash sos_boot ${sos_boot}",
            "description": "Flash sos_boot partition",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 600000,
            "tool": "fastboot"
        },
        {
            "args": "flash sos_rootfs ${sos_rootfs}",
            "description": "Flash sos_rootfs partition",
            "mandatory": true,
            "restrict": [
                "SOS",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 600000,
            "tool": "fastboot"
        },
        {
            "args": "flashing lock",
            "description": "Set device state to locked",
            "group": "lock-device",
            "mandatory": true,
            "restrict": [
                "SOS"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "continue",
            "description": "Boot to main OS",
            "mandatory": true,
            "restrict": [
                "SOS"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "flashing unlock",
            "description": "Set device state to unlocked",
            "mandatory": true,
            "restrict": [
                "AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "erase data_partition",
            "description": "Erase AaaG partition",
            "mandatory": true,
            "restrict": [
                "AaaG",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "format data_partition",
            "block_scan": true,
            "description": "Format AaaG partition",
            "mandatory": true,
            "restrict": [
                "AaaG",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 6000000,
            "tool": "fastboot"
        },
        {
            "args": "flash data_partition ${AaaG_data_partition}",
            "description": "Flash AaaG partition",
            "mandatory": true,
            "restrict": [
                "AaaG",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 1200000,
            "tool": "fastboot"
        },
        {
            "args": "flashing lock",
            "description": "Set device state to locked",
            "group": "lock-device",
            "mandatory": true,
            "restrict": [
                "AaaG",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        },
        {
            "args": "continue",
            "description": "Boot to main OS",
            "mandatory": true,
            "restrict": [
                "AaaG",
                "SOS_and_AaaG"
                ],
            "retry": 1,
            "timeout": 60000,
            "tool": "fastboot"
        }
        ],
            "configurations": {
                "SOS_and_AaaG": {
                    "brief": "SOS_and_AaaG",
                    "description": "flash SOS and AaaG images",
                    "groupsState": {
                        "lock-device": true
                    },
                    "name": "SOS_and_AaaG",
                    "parameters": {
                        "gpt": "gpt"
                    },
                    "startState": "pos"
                },
                "fw_update": {
                    "brief": "Flash IFWI",
                    "description": "Flash IFWI with dnxFwDownloader",
                    "name": "fw_update",
                    "startState": "dnx_fw"
                },
                "SOS": {
                    "brief": "SOS",
                    "description": "flash SOS images",
                    "groupsState": {
                        "lock-device": true
                    },
                    "name": "SOS",
                    "parameters": {
                        "gpt": "gpt"
                    },
                    "startState": "pos"
                },
                "AaaG": {
                    "brief": "AaaG",
                    "default": true,
                    "description": "flash AaaG images",
                    "groupsState": {
                        "lock-device": true
                    },
                    "name": "AaaG",
                    "parameters": {
                        "gpt": "gpt"
                    },
                    "startState": "pos"
                }
            },
            "groups": {
                "lock-device": {
                    "description": "Put the device in locked state at the end of the flash procedure.", 
                    "name": "Lock the device (it implies the userdata partition wipe)"
                }
            },
        "osplatform": "ACRN",
        "parameters": {
            "gpt": {
                "name": "gpt",
                "options": {
                    "gpt": {
                        "description": "partition_desc.bin",
                        "value": "partition_desc.bin"
                    }
                },
                "type": "file"
            },
            "dnxp_0x1": {
                "description": "dnxp_0x1.bin",
                "name": "dnxp_0x1",
                "type": "file",
                "value": "dnxp_0x1.bin"
            },
            "ifwi_dnx": {
                "description": "ifwi_dnx.bin",
                "name": "ifwi_dnx",
                "type": "file",
                "value": "ifwi_dnx.bin"
            },
            "sos_boot": {
                "description": "sos_boot.img",
                "name": "sos_boot",
                "type": "file",
                "value": "sos_boot.img"
            },
            "sos_rootfs": {
                "description": "sos_rootfs.img",
                "name": "sos_rootfs",
                "type": "file",
                "value": "sos_rootfs.img"
            },
            "AaaG_data_partition": {
                "description": "gordon_peak_acrn_AaaG.img",
                "name": "AaaG_data_partition",
                "type": "file",
                "value": "gordon_peak_acrn_AaaG.img"
            }
        },
        "version": "3.0"
    }
}
